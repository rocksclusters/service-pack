<chapter id="installing" xreflabel="Installing">


<title>Installing</title>

&source_roll-installing-standard;

<section id="installing-onthefly" xreflabel="On an Existing Server">
<title>On an Existing Server</title>

<para>
The Service Pack Roll can be installed on running frontend.
</para>

<para>
The following procedure will install and configure the roll for the frontend.
</para>

<para>
For i386, download the Service Pack Roll:
</para>

<para>
<screen>
# wget http://www.rocksclusters.org/ftp-site/pub/rocks/rocks-5.4/linux/service-pack-5.4.2-1.i386.disk1.iso
</screen>
</para>

<para>
Or for x86_64, download the Service Pack Roll:
</para>

<para>
<screen>
# wget http://www.rocksclusters.org/ftp-site/pub/rocks/rocks-5.4/linux/service-pack-5.4.2-1.x86_64.disk1.iso
</screen>
</para>

<para>
Then, as root, make sure to remove any old Service Pack Rolls:
</para>

<para>
<screen>
# rocks remove roll service-pack
</screen>
</para>

<para>
Now apply the new Service Pack Roll:
</para>

<para>
<screen>
# rocks set host attr localhost roll_install_on_the_fly true shadow=yes
# rocks add roll service-pack*iso
# rocks enable roll service-pack
# cd /export/rocks/install
# rocks create distro
# rocks run roll service-pack | bash
# init 6
</screen>
</para>

<warning>
<para>
When you execute "rocks run roll service-pack | bash" and if
you already have the SGE roll installed, you will see the following output:
</para>

<para>
<screen>
error - membership "Login" already exists
{appliance} [graph=string] [membership=string] [node=string] [os=string] [public=bool]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
error - firewall rule already exists
{appliance} [action=string] [chain=string] [network=string] [output-network=string] [protocol=string] [service=string]
</screen>
</para>

<para>
The above error messages can be safely ignored.
</para>

<para>
The configuration graph inside the SGE roll contains the links that properly
configures the frontend to install "login appliances".
To say it a different way, if you didn't install the SGE roll, then you
wouldn't be able to install login appliances (and you should be able to
install login appliances without the SGE roll).
This is one of the bugs that service pack roll fixes -- if the frontend already
has the ability to install login appliances, then when the service pack is
applied, you will see the above error messages.
</para>
</warning>

</section>


<section id="installing-nodes" xreflabel="Adding the Roll to Nodes">
<title>Adding the Roll to Nodes</title>

<para>
To add the the Service Pack Roll to the nodes of your cluster, you'll
need to reinstall the nodes.
</para>

<para>
To reinstall all your nodes, as root execute:
</para>

<para>
<screen>
# rocks run host '/boot/kickstart/cluster-kickstart-pxe'
</screen>
</para>

<warning>
<para>
It is critical that you run cluster-kickstart-pxe as it will force the
compute nodes to PXE boot.
It is important that you PXE boot the nodes for the first install,
because with a PXE boot based install, the nodes with get their initrd from
the frontend and inside the initrd is a new tracker-client that is compatible
with the new tracker-server.
After the first install, a new initrd will be on
the hard disk of the installed nodes and then it is safe to run
/boot/kickstart/cluster-kickstart.
</para>
</warning>

</section>



</chapter>

